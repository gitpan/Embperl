#!/usr/bin/perl 
###################################################################################
#
#   Embperl - Copyright (c) 1997-2001 Gerald Richter / ECOS
#
#   You may distribute under the terms of either the GNU General Public
#   License or the Artistic License, as specified in the Perl README file.
#   For use with Apache httpd and mod_perl, see also Apache copyright.
#
#   THIS PACKAGE IS PROVIDED "AS IS" AND WITHOUT ANY EXPRESS OR
#   IMPLIED WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED
#   WARRANTIES OF MERCHANTIBILITY AND FITNESS FOR A PARTICULAR PURPOSE.
#
#   $Id: epocgi.test.pl.templ,v 1.5 2002/10/22 05:29:06 richter Exp $
#
###################################################################################

BEGIN 
    {
    use ExtUtils::testlib ;
    my $cwd       = $ENV{EMBPERL_SRC} || $ENV{REDIRECT_EMBPERL_SRC} ;
    my $i = 0 ;
    foreach (@INC)
        {
        $INC[$i] = "$cwd/$_" if (/^(\.\/)?blib/) ;
        $i++ ;
        }
    %Embperl::initparam = (use_env => 1, use_redirect_env => 1) ;
    }	

use Embperl ;
use Embperl::Object ;

$^W = 1;

my $rc = Embperl::Object::Execute ({use_env => 1, use_redirect_env => 1}) ;


if ($rc)
    {
    $time = localtime ;

    print <<EOT;
Status: $rc
Content-Type: text/html

<HTML><HEAD><TITLE>Embperl Error</TITLE></HEAD>
<BODY bgcolor=\"#FFFFFF\">
<H1>epocgi Server Error: $rc</H1>
Please contact the server administrator, $ENV{SERVER_ADMIN} and inform them of the time the error occurred, and anything you might have done that may have caused the error.<P><P>
$ENV{SERVER_SOFTWARE} Embperl $Embperl::VERSION [$time]<P>
</BODY></HTML>

EOT
    }




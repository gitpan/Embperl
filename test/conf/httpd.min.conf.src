
# $Id: httpd.min.conf.src 1571436 2014-02-24 20:55:11Z richter $

$minstartup = $EPSTARTUP ;
$minstartup =~ s/startup.pl/startup_dso.pl/ ;

print OFH <<EOD ;
#
# Testconfig for Embperl make test
#
# This file is automatically generated each time you run make test/make start/make stop
#
HostnameLookups off
ServerAdmin webmaster

ServerRoot \"$EPPATH/test\"
ServerName localhost
DocumentRoot \"$EPPATH/test\"
Listen $EPPORT

EOD

if ($^O ne 'MSWin32')
	{
print OFH <<EOD ;

User $EPUSER
Group $EPGROUP

MinSpareServers 1
MaxSpareServers 30
StartServers 3
MaxClients 10
MaxRequestsPerChild 0


EOD
    }

print OFH "$EPMODPERL\n" ;

print OFH "LoadModule embperl_module \"$EPPATH/blib/arch/auto/Embperl/Embperl.so\"\n" if ($MP2) ;


print OFH <<EOD ;
ErrorLog tmp/httpd.err.log
PidFile tmp/httpd.pid


EOD

if (!$MP2)

    {

print OFH <<EOD ;

AccessConfig conf/null
ResourceConfig conf/null
EOD

    }


print OFH <<EOD ;
TypesConfig conf/null
EOD

if ($EPAPACHEVERSION !~ /2\.4\./)
    {
    print OFH "LockFile tmp/httpd.lock\n" ;
    }

print OFH <<EOD ;

PerlSetEnv EMBPERL_SRC \"$EPPATH\"
SetEnv EMBPERL_SRC \"$EPPATH\"


PerlRequire \"$EPPATH/test/conf/$minstartup\"
PerlModule Embperl
EOD

